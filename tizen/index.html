<!DOCTYPE html>
<html lang="en">
<head>
    <title>BitmovinYospacePlayer Demo</title>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">

    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="css/bitmovin-demo.css">
    <!--<link rel='stylesheet' href='https://cdn.bitmovin.com/player/web/8/bitmovinplayer-ui.css'>-->


    <script type='text/javascript' src='js/vast-client.min.js'></script>

    <script
            src='https://code.jquery.com/jquery-3.4.1.min.js'
            integrity='sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo='
            crossorigin='anonymous'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js'></script>
    <!--<script src="js/core-js.min.js"></script>-->
    <!--https://mcarriga.s3.us-east-2.amazonaws.com/tub.min.js -->
    <script type="text/javascript" src="js/bitmovin-player-yospace.min.js"></script>
    <script type="text/javascript" src="js/yo-ad-management.min.js"></script>
    <script type="text/javascript" src="js/vast-client.min.js"></script>
    <script type="text/javascript" src="js/bitmovin-player-yospace.min.js"></script>
</head>
<body>
<div id="wrapper">

    <div id="banner">
        <div class="logo"><a href="https://bitmovin.com"><img src="images/bitmovin-logo.png"></a></div>
        <div class="title"><h1 class="bitmovin-headline">BitmovinYospacePlayer Demo</h1></div>
        <div class="clearfix"></div>
    </div>

    <div class="container-fluid">
        <div class="content">
            <div class="row bitmovin-description">
                <div class="col-lg-12 text-center" id="source-names">

                </div>
            </div>
            <div class="row">
                <div class="col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
                    <div id="player"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>For more information about the bitmovin player, please have a look at our online <a href="https://developer.bitmovin.com" target="_blank">Developer Section</a>.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var yospacePlayer;
    setupControllerEvents();
    var vodSource = {
        title: 'VOD Stream',
        hls: 'https://vod-manifests-aka-qa.warnermediacdn.com/csm/tcm/clear/3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c/master_cl.m3u8?afid=222591187&caid=2100555&conf_csid=tbs.com_videopage_test&context=182883174&nw=42448&prof=48804%3Amp4_plus_vast_truex&vdur=1800&yo.vp=true',
        assetType: bitmovin.player.ads.yospace.YospaceAssetType.VOD,
    };
    var vodVpaidSource = {
        title: 'VOD Stream',
        hls: 'https://vod-manifests-aka-qa.warnermediacdn.com/csm/tcm/clear/3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c3c/master_cl.m3u8?afid=222591187&caid=2100555&conf_csid=tbs.com_videopage&context=182883174&nw=42448&prof=48804%3Atbs_web_vod&vdur=1800&yo.vp=true',
        // Yospace configuration
        assetType: bitmovin.player.ads.yospace.YospaceAssetType.VOD,
    };
    var artOfMotionSource = {
        dash: 'https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd',
        hls: 'https://bitmovin-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',
        progressive: 'https://bitmovin-a.akamaihd.net/content/MI201109210084_1/MI201109210084_mpeg-4_hd_high_1080p25_10mbits.mp4',
        poster: 'https://bitmovin-a.akamaihd.net/content/MI201109210084_1/poster.jpg',
    };
    var truexAdFree = false // disable Truex

    var conf = {
        key: 'edc2b14e-a636-49d7-a011-0c854fab98f3',
        playback: {
            muted: false,
            autoplay: true,
        },
        logs: {
            level: 'none',
        },
        ui: false,
        tweaks: {
            enable_seek_for_live: true,
            resume_live_content_at_previous_position_after_ad_break: true,
            file_protocol : true, // Required if app is being loaded from file system
            app_id : "Ff4zhu5kqV.TizenBitmovinPlayerAppMode" // this Tizen App Id should also be whitelisted in Player License and optionallt, Analaytics License
        }
    };

    // Yospace configuration
    var yospaceConfig = {
        debug: false,
        disableVpaidRenderer: false,
        liveVpaidDurationAdjustment: 2,
        disableStrictBreaks: false,
        disableServiceWorker: true, //Disable Service Worker for Tizen Web App use
    };

    var sampleYospacePlayerPolicy = {
        canMute: () => {
            return true;
        },
        canSeek: () => {
            return true;
        },
        canSeekTo: (seekTarget) => {
            return seekTarget;
        },
        canSkip: () => {
            return true;
        },
        canPause: () => {
            return true;
        },
        canChangePlaybackSpeed: () => {
            return true;
        },
    };

    var playerContainer = document.getElementById('player');
    yospacePlayer = new bitmovin.player.ads.yospace.BitmovinYospacePlayer(playerContainer, conf, yospaceConfig);

    yospacePlayer.setup().then(function() {
        yospacePlayer.setPolicy(sampleYospacePlayerPolicy);
        yospacePlayer.load(vodSource);
    })

    function setupControllerEvents() {
        tizen.tvinputdevice.registerKey('MediaPlayPause');
        tizen.tvinputdevice.registerKey('ColorF0Red');

        // add eventListener for keydown
        document.addEventListener('keydown', function(e) {
            switch (e.keyCode) {
                case tizen.tvinputdevice.getKey('MediaPlayPause').code:
                    if (player.isPlaying()) {
                        player.pause();
                    } else {
                        player.play();
                    }
                    break;
                case 37: // LEFT arrow
                    break;
                case 38: // UP arrow
                    break;
                case 39: // RIGHT arrow
                    break;
                case 40: // DOWN arrow
                    break;
                case 13: // OK button
                    break;
                case 10009: // RETURN button
                    tizen.application.getCurrentApplication().exit();
                    break;
                default:
                    console.log('Key code : ' + e.keyCode);
                    break;
            }
        });
    }
</script>
</body>
</html>
