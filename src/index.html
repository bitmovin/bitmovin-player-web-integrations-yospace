<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bitmovin Player Yospace Integration Test Page</title>
  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bitmovin Player -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <script type="text/javascript" src="yospace/yo-ad-management.min.js"></script>
  <script type="text/javascript" src="js/bitmovinplayer-yospace.js"></script>

  <script type="text/javascript" src="//cdn.bitmovin.com/player/web/8.1.0-rc1/bitmovinplayer-ui.js"></script>
  <link rel="stylesheet" href="//cdn.bitmovin.com/player/web/8.1.0-rc1/bitmovinplayer-ui.css">
  <style>
    .player-wrapper {
      margin: 20px auto;
      box-shadow: 0 0 30px rgba(0,0,0,0.7);
    }
    .meta-info {
      margin: 20px auto;
      text-align: center;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="meta-info">
    <div class="row">
      <div class="col-12">
        <div class="btn-group btn-group-toggle" data-toggle="buttons">
          <label class="btn btn-outline-secondary active">
            <input type="radio" name="options" id="option-vod" autocomplete="off" checked>Load VOD
          </label>
          <label class="btn btn-outline-secondary">
            <input type="radio" name="options" id="option-live" autocomplete="off">Load Live
          </label>
        </div>
      </div>
    </div>
  </div>
  <div class="content">
    <div class="player-wrapper">
      <div id="player"></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var yospacePlayer;

  var vodButton = $('#option-vod').parent();
  var liveButton = $('#option-live').parent();

  vodButton.on('click', function() {
    vodButton.button('toggle');

    yospacePlayer.unload();
    yospacePlayer.load(vodSource);
  });

  liveButton.on('click', function() {
    liveButton.button('toggle');

    yospacePlayer.unload();
    yospacePlayer.load(liveSource);
  });

  var liveSource = {
    title: 'Live Stream',
    hls: 'http://csm-e.cds1.yospace.com/csm/extlive/yospace02,hlssample.m3u8?yo.br=false&yo.ac=true',

    // Yospace configuration
    assetType: bitmovin.player.ads.yospace.YospaceAssetType.LINEAR
  };

  var vodSource = {
    title: 'VOD Stream',
    hls: 'http://csm-e-ces1eurxaws101j8-6x78eoil2agd.cds1.yospace.com/access/d/400/u/0/1/130782300?f=0000130753172&format=vmap',

    // Yospace configuration
    assetType: bitmovin.player.ads.yospace.YospaceAssetType.VOD
  };

  var conf = {
    key: 'YOUR-PLAYER-KEY',
    playback: {
      muted: true,
      autoplay: true
    },
    ui: false,
  };

  // Yospace configuration
  var yospaceConfig = {
      debug: true
  };

  var playerContainer = document.getElementById('player');
  yospacePlayer = new bitmovin.player.ads.yospace.BitmovinYospacePlayer(playerContainer, conf, yospaceConfig);

  bitmovin.playerui.UIFactory.buildDefaultUI(yospacePlayer);
  yospacePlayer.load(vodSource).then(function() {
      console.log('loaded');
  }).catch(function() {
      console.log('gotcha');
  });
  // bitmovin.player.playerui.UIFactory.buildDefaultUI(yospacePlayer);

  // TODO: test with custom UI

</script>
</body>
</html>
